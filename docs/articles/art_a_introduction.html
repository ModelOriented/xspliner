<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic theory and usage • xspliner</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top navbar-mi2" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-mi2logo" href="http://mi2.mini.pw.edu.pl/">
        <img src="https://github.com/mi2-warsaw/MI2template/blob/master/inst/pkgdown/assets/MI2logo.jpg?raw=true" alt="MI2" height="46" title="MI2"></a>
      <a class="navbar-brand navbar-mi2" href="../index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="navbar-mi2 nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/art_a_introduction.html">Basic theory and usage</a>
    </li>
    <li>
      <a href="../articles/art_b_discrete_response_or_predictor.html">Classification and discrete predictors</a>
    </li>
    <li>
      <a href="../articles/art_c_graphics.html">Graphics</a>
    </li>
    <li>
      <a href="../articles/art_d_automation.html">Automate you work</a>
    </li>
    <li>
      <a href="../articles/art_e_methods.html">Methods and xspliner environment</a>
    </li>
    <li>
      <a href="../articles/art_f_extras.html">Extra information about the package</a>
    </li>
    <li>
      <a href="../articles/art_g_use_cases.html">Use cases</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Basic theory and usage</h1>
                        <h4 class="author">Krystian Igras</h4>
            
            <h4 class="date">2018-12-09</h4>
      
      
      <div class="hidden name"><code>art_a_introduction.Rmd</code></div>

    </div>

    
    
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>In regression or classification problem, the main issue is choosing the model that should meet our requirements as much as possible. On the one hand, we want the chosen solution to have the best statistical properties such as accuracy, RMSE or R Squared - on the other hand, we focus on the interpretability of the model.</p>
<p>In the first case, the black box models, such as randomForest or XGBoost, perform better than others, while the second case is dominated by linear models. The xspliner package aims to combine both methods: use the knowledge gathered from black box models in order to build an interpretable linear one.</p>
</div>
<div id="general-idea" class="section level2">
<h2 class="hasAnchor">
<a href="#general-idea" class="anchor"></a>General idea</h2>
<p>Below graphics show general idea used in xspliner model <em>(todo)</em></p>
<div id="black-box-variable-response" class="section level3">
<h3 class="hasAnchor">
<a href="#black-box-variable-response" class="anchor"></a>Black box variable response</h3>
<p>When black box model is already built, you may want to check how each predictor variable affects the final response. This is quite easy when you use a linear model or have low dimensional data (up to 2, 3 dimensions). One of the ideas for testing the predictor impact in more complicated model is to check an average model response of the selected variable.</p>
<p>One of such approaches called Partial Dependence Plots is implemented in the <a href="https://github.com/bgreenwell/pdp">pdp</a> package (Brandon M. Greenwell (2017). Pdp: The R Journal, 9 (1), 421-436.), or the <a href="https://CRAN.R-project.org/package=ALEPlot">ALEPlot</a> package (Dan Apley (2017). ALEPlot: Accumulated Local Effects Plots and Partial Dependence Plots.) using Accumulated Local Effects Plots.</p>
<p>In each case, we get a single variable function, which should explain the impact of the predictor on the response variable.</p>
<p>The following pictures show the <code>ptratio</code> impact on <code>cmedv</code> in some random forest model based on the Boston Housing Data. Below curves are obtained by the approach of the pdp and ale methods respectively.</p>
<p><img src="art_a_introduction_files/figure-html/unnamed-chunk-2-1.png" width="288"><img src="art_a_introduction_files/figure-html/unnamed-chunk-2-2.png" width="288"></p>
<p>As we can see, above functions are irregular, making it difficult to interpret explained effect.</p>
<p>If above functions had linear character, one would be tempted to approximate them with linear function. As a result it could be easy to interpret how it affects the variable explained in the black box model. What if the function is irregular, as above? Could we approximate it with polynomials?</p>
</div>
<div id="splines" class="section level3">
<h3 class="hasAnchor">
<a href="#splines" class="anchor"></a>Splines</h3>
<p>Due to the large errors that occur with approximation of functions with polynomials, the approach using spline approximation is the most common solution. Splines (functions that are piecewise polynomials) have good approximating properties, in addition their form is overt so we can thus interpret the resulting function.</p>
<p>The following graphics show spline approximations of pdp and ale curves:</p>
<p><img src="art_a_introduction_files/figure-html/unnamed-chunk-3-1.png" width="288"><img src="art_a_introduction_files/figure-html/unnamed-chunk-3-2.png" width="288"></p>
<p>But even with approximated PDP, how could we use it to interpret black box model?</p>
</div>
<div id="linear-models-based-on-response-function-and-splines" class="section level3">
<h3 class="hasAnchor">
<a href="#linear-models-based-on-response-function-and-splines" class="anchor"></a>Linear models based on response function and splines</h3>
<p>The general idea of how to use the response function and splines to build an interpretable model that could be used as black box expliner is as follows.</p>
<ul>
<li>For each variable used in the black box model, create a response function based on one of the known methods, let’s mark it <span class="math inline">\(f_{x}\)</span>
</li>
<li>Approximate <span class="math inline">\(f_{x}\)</span> using spline - the result is <span class="math inline">\(\widetilde{f}_{x}\)</span>
</li>
<li>Build linear model, in which each predictior <span class="math inline">\(x_{i}\)</span> is transformed with approximated response function: <span class="math inline">\(\widetilde{f}_{x_{i}}(x_{i})\)</span>
</li>
</ul>
<p>Shortly, using black box formula <span class="math display">\[y \sim x_{1} + \cdots + x_{n}\]</span> use <span class="math display">\[y \sim \widetilde{f}_{x_{1}}(x_{1}) + \cdots + \widetilde{f}_{x_{n}}(x_{n})\]</span> in linear one.</p>
<p>The resulting model uses a part of the information that was extracted while building black box model. If linear model performance is similar to black box one, it could be used as it’s good interpretation.</p>
</div>
</div>
<div id="how-to-do-it-with-xspliner" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-do-it-with-xspliner" class="anchor"></a>How to do it with xspliner?</h2>
<div id="defining-formula" class="section level3">
<h3 class="hasAnchor">
<a href="#defining-formula" class="anchor"></a>Defining formula</h3>
<p>This sections shows, how to build formula interpretable by xspliner package using Boston Housing Data from <code>pdp</code> package.</p>
<p>Read the data</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(boston)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(boston)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt; 'data.frame':    506 obs. of  16 variables:</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt;  $ lon    : num  -71 -71 -70.9 -70.9 -70.9 ...</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt;  $ lat    : num  42.3 42.3 42.3 42.3 42.3 ...</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;  $ cmedv  : num  24 21.6 34.7 33.4 36.2 28.7 22.9 22.1 16.5 18.9 ...</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt;  $ crim   : num  0.00632 0.02731 0.02729 0.03237 0.06905 ...</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt;  $ zn     : num  18 0 0 0 0 0 12.5 12.5 12.5 12.5 ...</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt;  $ indus  : num  2.31 7.07 7.07 2.18 2.18 2.18 7.87 7.87 7.87 7.87 ...</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;  $ chas   : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;  $ nox    : num  0.538 0.469 0.469 0.458 0.458 0.458 0.524 0.524 0.524 0.524 ...</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;  $ rm     : num  6.58 6.42 7.18 7 7.15 ...</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt;  $ age    : num  65.2 78.9 61.1 45.8 54.2 58.7 66.6 96.1 100 85.9 ...</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;  $ dis    : num  4.09 4.97 4.97 6.06 6.06 ...</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;  $ rad    : int  1 2 2 3 3 3 5 5 5 5 ...</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;  $ tax    : int  296 242 242 222 222 222 311 311 311 311 ...</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;  $ ptratio: num  15.3 17.8 17.8 18.7 18.7 18.7 15.2 15.2 15.2 15.2 ...</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  $ b      : num  397 397 393 395 397 ...</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  $ lstat  : num  4.98 9.14 4.03 2.94 5.33 ...</span></a></code></pre></div>
<p>We’re going to build model based on formula</p>
<pre><code>cmedv ~ rm + lstat + nox</code></pre>
<p>So let’s build a random forest black box model, that we use as a base for further steps:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">boston_rf &lt;-<span class="st"> </span><span class="kw">randomForest</span>(cmedv <span class="op">~</span><span class="st"> </span>rm <span class="op">+</span><span class="st"> </span>lstat <span class="op">+</span><span class="st"> </span>nox, <span class="dt">data =</span> boston)</a></code></pre></div>
<p>Now let’s specify which variables should be transformed. In this example only <code>nox</code> variable will use random forest effect (PDP or ALEPlot).</p>
<p>To indicate transformation use <code>xs(nos)</code> symbol.</p>
<p>So we have:</p>
<pre><code>cmedv ~ rm + lstat + xs(nox)</code></pre>
<p>This formula is enough to build a GLM model (with using default parameters and xspliner glm generating function). Nevertheless to understand deeply the approach let’s go further with the theory.</p>
<p>As the algoritm goes through creating black box based response function and its approximation we need to specify desirable parameters.</p>
<div id="specifying-which-method-should-we-use-to-build-response-function" class="section level4">
<h4 class="hasAnchor">
<a href="#specifying-which-method-should-we-use-to-build-response-function" class="anchor"></a>Specifying which method should we use to build response function</h4>
<p>Let’s name one dimensional model response (such PD or ALE) as <strong>effect</strong>.</p>
<p>As remarked in first section, currently implemented effects for quantitative predictors are Partial Dependence Plots (<strong>pdp</strong> package) and Accumulated Local Effects Plots (<strong>ALEPlot</strong> package).</p>
<p>In order to configure one of this methods, we need to specify <code>effect</code> parameter inside <code>xs</code> symbol used in formula:</p>
<pre><code>effect = list(
  type = &lt;method_type&gt; # "pdp" or "ale",
  ... # named list - other parameters passed for chosen method
)</code></pre>
<p>So to use PDP effect for the predictor just specify <code>xs(nox, effect = list(type = "pdp"))</code>, for ALE <code>xs(nox, effect = list(type = "ale"))</code>.</p>
<p>How to find out what other parameters can be used? Just check:</p>
<ul>
<li>
<code><a href="https://www.rdocumentation.org/packages/pdp/topics/partial">pdp::partial</a></code> in case of <code>type = "pdp"</code>
</li>
<li>
<code><a href="https://www.rdocumentation.org/packages/ALEPlot/topics/ALEPlot">ALEPlot::ALEPlot</a></code> in case of <code>type = "ale"</code> the functions responsible for effect response.</li>
</ul>
<p>Below we will use PDP random forest effect, that returns 40 response points for <code>nox</code> variable. By checking <code><a href="https://www.rdocumentation.org/packages/pdp/topics/partial">?pdp::partial</a></code> we can see that <code>grid.resolution</code> parameter specifies predictor grid.</p>
<p>Now we should just specify: <code>xs(nox, effect = list(type = "pdp", grid.resolution = 40))</code>.</p>
<p>Let’s verify correctness of this parameters with the bare usage of <code><a href="https://www.rdocumentation.org/packages/pdp/topics/partial">pdp::partial</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">rf_effect &lt;-<span class="st"> </span>pdp<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/pdp/topics/partial">partial</a></span>(boston_rf, <span class="st">"nox"</span>, <span class="dt">grid.resolution =</span> <span class="dv">40</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(rf_effect)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;         nox     yhat</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; 1 0.3850000 23.38131</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 2 0.3974615 23.40352</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 3 0.4099231 23.49511</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 4 0.4223846 23.62153</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 5 0.4348462 23.60978</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 6 0.4473077 23.69874</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(rf_effect)</a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; [1] 40</span></a></code></pre></div>
<p>We got data.frame with predictor and response values containing 40 rows. So parameter should correctly specify our expectations.</p>
<p><em>Remark</em></p>
<p>Here we can see that response function is presented as data.frame with two columns:</p>
<ul>
<li>
<code>nox</code> - <span class="math inline">\(n\)</span> evenly spaced points across range of <code>nox</code> variable. Specified by <code>grid.resolution</code> parameter (51 by default)</li>
<li>
<code>yhat</code> - response function values on points specified in the first column</li>
</ul>
<p>Let’s learn now how to specify approximation approach.</p>
</div>
<div id="specifying-spline-approximation-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#specifying-spline-approximation-parameters" class="anchor"></a>Specifying spline approximation parameters</h4>
<p>Response function is approximated with <code><a href="https://www.rdocumentation.org/packages/mgcv/topics/gam">mgcv::gam</a></code> package and <code><a href="https://www.rdocumentation.org/packages/mgcv/topics/s">mgcv::s</a></code> smoothing function.</p>
<p><code>xspliner</code> allows using all smoothing methods provided by <code><a href="https://www.rdocumentation.org/packages/mgcv/topics/s">mgcv::s</a></code>.</p>
<p>How can we do that?</p>
<p>Let’s name approximation result as <strong>transition</strong>. To specify it’s parameters such as spline base we can use <code>transition</code> parameter inside <code>xs</code> symbol. Similarly to <code>effect</code>, <code>transition</code> is specified as the parameters list. Possible options can be found by <code>??mgcv::s</code> (a few extra options can be found in next articles).</p>
<p>Shortly:</p>
<pre><code>transition = &lt;mgcv::s parameters&gt; # named list</code></pre>
<p>Let’s assume we want to approximate response function with cubic splines and basis dimension equal to 10. As we can see in <code><a href="https://www.rdocumentation.org/packages/mgcv/topics/s">mgcv::s</a></code> documentation, we need to set: <code>k = 10</code> and <code>bs = "cr"</code>.</p>
<p>We just need to use:</p>
<pre><code>cmedv ~ rm + lstat + xs(nox, transition = list(k = 10, bs = "cr"))</code></pre>
<p>Finally using both, we get the formula:</p>
<pre><code>cmedv ~ rm + lstat + xs(nox, 
  effect = list(type = "pdp", grid.resolution = 40),
  transition = list(k = 10, bs = "cr"))</code></pre>
<p>To sum up, we specified formula for building GLM model, in which we transform <code>nox</code> variable with some function constructed on the following steps:</p>
<ul>
<li>we extract impact of <code>nox</code> variable on <code>cmedv</code> in already build black box model (actually not specified yet in formula)</li>
<li>we get that impact as PDP in form of 40 evenly spaced (over <code>nox</code> range) points</li>
<li>we estimate PDP with the use of <code>cubic</code> splines with 10 dimensional base The estimation is our final function used for <code>nox</code> transformation in final GLM.</li>
</ul>
</div>
</div>
<div id="building-the-model" class="section level3">
<h3 class="hasAnchor">
<a href="#building-the-model" class="anchor"></a>Building the model</h3>
<p>Having the formula defined, we almost have all the required data provided to build GLM. The only one left, that the approach requires is the black box model that is the basis of our resulting model.</p>
<p>We will use here <code>model_rf</code> random forest model that was built before.</p>
<p>The final step is to use <code><a href="../reference/xspline.html">xspliner::xspline</a></code> to build the desired model.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">xp_model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/xspline.html">xspline</a></span>(</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  cmedv <span class="op">~</span><span class="st"> </span>rm <span class="op">+</span><span class="st"> </span>lstat <span class="op">+</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">    </span><span class="kw">xs</span>(nox, </a>
<a class="sourceLine" id="cb10-4" data-line-number="4">       <span class="dt">effect =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">type =</span> <span class="st">"pdp"</span>, <span class="dt">grid.resolution =</span> <span class="dv">40</span>), </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">       <span class="dt">transition =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">k =</span> <span class="dv">10</span>, <span class="dt">bs =</span> <span class="st">"cr"</span>)),</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">  <span class="dt">model =</span> boston_rf</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">)</a></code></pre></div>
<p>Lets check the model summary:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(xp_model)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; glm(formula = cmedv ~ rm + lstat + xs(nox), family = family, </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;     data = data)</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; Deviance Residuals: </span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;      Min        1Q    Median        3Q       Max  </span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; -13.4873   -3.2935   -0.8747    1.9991   26.9926  </span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    </span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; (Intercept) -34.29942    5.05680  -6.783 3.32e-11 ***</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; rm            5.23681    0.41600  12.589  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; lstat        -0.52504    0.04355 -12.057  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt; xs(nox)       1.31670    0.16255   8.100 4.20e-15 ***</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co">#&gt; (Dispersion parameter for gaussian family taken to be 26.81888)</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-22" data-line-number="22"><span class="co">#&gt;     Null deviance: 42578  on 505  degrees of freedom</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23"><span class="co">#&gt; Residual deviance: 13463  on 502  degrees of freedom</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24"><span class="co">#&gt; AIC: 3106.2</span></a>
<a class="sourceLine" id="cb11-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-26" data-line-number="26"><span class="co">#&gt; Number of Fisher Scoring iterations: 2</span></a></code></pre></div>
<p>As the final model is just the GLM, the summary is also standard. One difference that we can see here is the formula call. It has missing <code>xs</code> parameters, and <code>xs</code> is treated as standard R function (previously it was just the symbol used in formula).</p>
<p>More details about can be found in following sections:</p>
<ul>
<li>
<a href="https://krystian8207.github.io/xspliner/articles/2_discrete_response_or_predictor.html">Discrete response or predictor</a> - learn how model works when black box is classificator or what effect and transition is used when predictor is dicrete variable</li>
<li>
<a href="https://krystian8207.github.io/xspliner/articles/3_graphics.html">Graphics</a> - learn how to plot the results, or compare compare xspliner with base black box.</li>
<li>
<a href="https://krystian8207.github.io/xspliner/articles/4_automation.html">Automation</a> - learn how to automate building xspliners without specifying your own formula and/or using global parameters</li>
<li>
<a href="https://krystian8207.github.io/xspliner/articles/5_methods.html">Methods</a> - learn about other xspliner methods and its environment</li>
<li>
<a href="https://krystian8207.github.io/xspliner/articles/6_extras.html">Extras</a> - what additional features are provided by xspliner</li>
<li>
<a href="https://krystian8207.github.io/xspliner/articles/7_use_cases.html">Use cases</a> - see <code>xspliner</code> in action with examples</li>
</ul>
<p>Here we shortly show how the plot random forest effect and transition for <code>nox</code> variable:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(xp_model, <span class="st">"nox"</span>)</a></code></pre></div>
<p><img src="art_a_introduction_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#motivation">Motivation</a></li>
      <li><a href="#general-idea">General idea</a></li>
      <li><a href="#how-to-do-it-with-xspliner">How to do it with xspliner?</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Krystian Igras, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
